{"version":3,"sources":["Store/Reducers/user.js","Store/Reducers/channel.js","Store/Reducers/index.js","firebase.js","Pages/Register/Register.js","Pages/Login/Login.js","Components/ColorPanel/ColorPanel.js","Helpers/handleOnlineStatus.js","Components/SidePanel/UserPanel.js","Store/Actions/resetApp.js","Store/Actions/setChannel.js","Components/SidePanel/Channels.js","Components/SidePanel/DirectMessages.js","Components/SidePanel/SidePanel.js","Components/Messages/MessagesHeader.js","Components/Messages/FileModal.js","Components/Messages/ProgressBar.js","Components/Messages/MessageForm.js","Components/Messages/SingleMessage.js","Components/Messages/Messages.js","Components/MetaPanel/MetaPanel.js","Pages/MainPage/MainPage.js","Components/Spinner/Spiner.js","App.js","Store/Actions/setUser.js","index.js"],"names":["initialState","user","isLoading","channel","isPrivate","appReducer","combineReducers","state","action","type","firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","appId","measurementId","Register","useState","username","email","password","passwordConfirm","errors","loading","usersRef","database","ref","form","setForm","handleChange","e","target","name","value","formIsNotEmpty","length","passwordsMatch","isValidUsername","saveUser","createdUser","child","uid","set","displayName","avatar","photoURL","errorMessage","Message","color","Grid","className","textAlign","verticalAlign","Column","style","maxWidth","Header","as","Icon","Form","size","Segment","stacked","Input","fluid","icon","iconPosition","placeholder","onChange","Button","disabled","onClick","preventDefault","auth","createUserWithEmailAndPassword","then","updateProfile","md5","catch","err","console","log","message","to","Login","isFormValid","prev","signInWithEmailAndPassword","signedUser","ColorPanel","Sidebar","Menu","inverted","vertical","visible","width","Divider","handleOnlineStatus","userId","remove","UserPanel","userData","dispatch","useDispatch","dropdownOptions","key","text","signOut","GridColumn","GridRow","padding","margin","floated","HeaderContent","Dropdown","trigger","Image","src","spaced","options","setChannel","Channels","modal","channelName","channelDetails","channels","channelsRef","firstLoad","activeChannel","addListeners","loadedChannels","on","snap","push","val","setState","setFirstChannel","props","id","closeModal","openModal","handleSubmit","addChannel","newChannel","details","createdBy","update","changeChannel","displayChannels","map","Item","active","this","off","Fragment","paddingBottom","Modal","basic","open","onClose","Content","Field","onSubmit","label","Actions","React","Component","connect","DirectMessages","userRef","users","presenceRef","removeListeners","addEventListeners","setUsers","loadedUsers","addStatusToUser","connected","updateUsers","reduce","acc","concat","channelId","setChannelId","createChannel","friendId","displayUsers","status","SidePanel","backgroundColor","fixed","MessagesHeader","userAmount","clearing","Subheader","FileModal","uploadFile","file","authorized","data","setData","resetFileState","isAuthorized","fileName","includes","mime","lookup","files","metadata","contentType","ProgressBar","uploadState","percents","Progress","percent","progress","indicating","MessageForm","createMessage","fileUrl","timestamp","ServerValue","TIMESTAMP","filePath","uuidv4","pathToUpload","messageRef","uploadTask","storageRef","put","percentUploaded","Math","round","bytesTransferred","totalBytes","snapshot","getDownloadURL","downloadUrl","sendFileMessage","error","sendMessage","storage","labelPosition","onKeyDown","keyCode","Group","widths","marginTop","content","isOnMessage","SingleMessage","Comment","Avatar","Author","Metadata","moment","fromNow","hasOwnProperty","isImage","image","Text","Messages","messages","messageLoading","privateMessageRef","listeners","searchTerm","messagesEndRef","useRef","useEffect","current","scrollIntoView","behavior","forEach","listener","event","addMessageListener","setMessageRef","loadedMessages","findIndex","newListener","addToListeners","displayChannelName","usersAmount","filter","undefined","displayMessages","MetaPanel","MainPage","useSelector","columns","marginLeft","Spinner","Dimmer","Loader","App","onAuthStateChanged","setUser","window","addEventListener","history","exact","path","component","withRouter","store","createStore","applyMiddleware","Thunk","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.ddaa23a2.chunk.js","sourcesContent":["const initialState = {\n  user: null,\n  isLoading: true\n};\n\nexport const user = (state = initialState, action) => {\n  switch (action.type) {\n    case \"SET_USER\":\n      return {\n        ...state,\n        user: action.user,\n        isLoading: false\n      };\n    default:\n      return state;\n  }\n};\n","const initialState = {\n  channel: null,\n  isPrivate: false\n};\n\nexport const channel = (state = initialState, action) => {\n  switch (action.type) {\n    case \"SET_CHANNEL\":\n      return {\n        ...state,\n        channel: action.channel,\n        isPrivate: action.isPrivate\n      };\n    default:\n      return state;\n  }\n};\n","import { combineReducers } from \"redux\";\nimport { user } from \"./user\";\nimport { channel } from \"./channel\";\n\nconst appReducer = combineReducers({\n  user,\n  channel\n});\n\nexport const allReducer = (state, action) => {\n  if (action.type === \"RESET_APP\") {\n    state = undefined;\n  }\n  return appReducer(state, action);\n};\n","import firebase from 'firebase'\nimport 'firebase/auth';\nimport 'firebase/database';\nimport 'firebase/storage';\n\nconst firebaseConfig = {\n    apiKey: \"AIzaSyBa643TjTtPD0rnjdOfuFLpYyzDdsqr0Iw\",\n    authDomain: \"plack-23141.firebaseapp.com\",\n    databaseURL: \"https://plack-23141.firebaseio.com\",\n    projectId: \"plack-23141\",\n    storageBucket: \"plack-23141.appspot.com\",\n    messagingSenderId: \"360318459062\",\n    appId: \"1:360318459062:web:a7d366336084667dacda17\",\n    measurementId: \"G-E16F9YZVBR\"\n};\n\nfirebase.initializeApp(firebaseConfig);\n\n  export default firebase;","import React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport firebase from \"../../firebase\";\nimport md5 from \"md5\";\nimport {\n  Grid,\n  Form,\n  Segment,\n  Button,\n  Header,\n  Message,\n  Icon\n} from \"semantic-ui-react\";\nimport \"../../App.css\";\n\nconst Register = () => {\n  const [form, setForm] = useState({\n    username: \"\",\n    email: \"\",\n    password: \"\",\n    passwordConfirm: \"\",\n    errors: \"\",\n    loading: false,\n    usersRef: firebase.database().ref(\"users\")\n  });\n\n  const handleChange = e => {\n    setForm({\n      ...form,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const isFormValid = () => {\n    if (!formIsNotEmpty(form)) {\n      setForm({ ...form, errors: \"Fill all fields\" });\n      return false;\n    } else if (!passwordsMatch(form)) {\n      setForm({\n        ...form,\n        errors: \"Passwords do not match or password to short\"\n      });\n      return false;\n    }\n    else if (!isValidUsername(form)) {\n        setForm({\n            ...form,\n            errors: \"Username length has to be more than 3 symbols\"\n        });\n        return false;\n    }\n    else return true;\n  };\n\n  const formIsNotEmpty = ({ username, password, email }) => {\n    return username.length && password.length && email.length > 0;\n  };\n\n  const passwordsMatch = ({ password, passwordConfirm }) => {\n    return password === passwordConfirm && password.length >= 6;\n    };\n\n    const isValidUsername = ({ username }) => {\n        return username.length > 3;\n    };\n\n  const handleSubmit = e => {\n    if (isFormValid()) {\n      e.preventDefault();\n      setForm({ ...form, loading: true, errors: \"\" });\n      firebase\n        .auth()\n        .createUserWithEmailAndPassword(form.email, form.password)\n        .then(createdUser => {\n          createdUser.user\n            .updateProfile({\n              displayName: form.username,\n              photoURL: `https://www.gravatar.com/avatar/${md5(\n                createdUser.user.email\n              )}?d=identicon`\n            })\n            .then(() => {\n              saveUser(createdUser);\n            })\n            .catch(err => {\n              console.log(err);\n              setForm({ ...form, loading: false, errors: err.message });\n            });\n        })\n        .catch(err => {\n          setForm({ ...form, loading: false, errors: err.message });\n          console.log(err);\n        });\n    }\n  };\n\n  const saveUser = createdUser => {\n    return form.usersRef.child(createdUser.user.uid).set({\n      name: createdUser.user.displayName,\n      avatar: createdUser.user.photoURL\n    });\n  };\n\n  const errorMessage = <Message color=\"red\">{form.errors}</Message>;\n\n  return (\n    <Grid className=\"u-heigth100vh\" textAlign=\"center\" verticalAlign=\"middle\">\n      <Grid.Column style={{ maxWidth: 450 }}>\n        <Header as=\"h2\" color=\"red\" textAlign=\"center\">\n          <Icon name=\"code\" color=\"black\" />\n          Register for Plack\n        </Header>\n        <Form size=\"large\">\n          <Segment stacked>\n            <Form.Input\n              fluid\n              name=\"username\"\n              icon=\"user\"\n              iconPosition=\"left\"\n              placeholder=\"Username\"\n              onChange={handleChange}\n              type=\"text\"\n            />\n            <Form.Input\n              fluid\n              name=\"email\"\n              icon=\"mail\"\n              iconPosition=\"left\"\n              placeholder=\"Email-adress\"\n              onChange={handleChange}\n              type=\"email\"\n            />\n            <Form.Input\n              fluid\n              name=\"password\"\n              icon=\"lock\"\n              iconPosition=\"left\"\n              placeholder=\"Password\"\n              onChange={handleChange}\n              type=\"password\"\n            />\n            <Form.Input\n              fluid\n              name=\"passwordConfirm\"\n              icon=\"repeat\"\n              iconPosition=\"left\"\n              placeholder=\"Repeat password\"\n              onChange={handleChange}\n              type=\"password\"\n            />\n\n            <Button\n              disabled={form.loading}\n              className={form.loading ? \"loading\" : null}\n              onClick={handleSubmit}\n              color=\"red\"\n              fluid\n              size=\"large\"\n            >\n              Submit\n            </Button>\n          </Segment>\n        </Form>\n        {form.errors.length > 0 ? errorMessage : null}\n        <Message>\n          Already a user? <Link to=\"/login\">Login</Link>\n        </Message>\n      </Grid.Column>\n    </Grid>\n  );\n};\n\nexport default Register;\n","import React, { useState } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport firebase from \"../../firebase\";\nimport {\n  Grid,\n  Form,\n  Segment,\n  Button,\n  Header,\n  Message,\n  Icon\n} from \"semantic-ui-react\";\nimport \"../../App.css\";\n\nconst Login = () => {\n  const [form, setForm] = useState({\n    email: null,\n    password: null,\n    errors: \"\",\n    loading: false\n  });\n\n  const handleChange = e => {\n    setForm({\n      ...form,\n      [e.target.name]: e.target.value\n    });\n  };\n\n  const handleSubmit = e => {\n    if (isFormValid(form)) {\n      e.preventDefault();\n      setForm(prev => ({ ...prev, loading: true, errors: \"\" }));\n      firebase\n        .auth()\n        .signInWithEmailAndPassword(form.email, form.password)\n        .then(signedUser => {\n          setForm(prev => ({ ...prev, loading: false }));\n        })\n        .catch(err => {\n          console.log(err);\n          setForm(prev => ({ ...prev, loading: false, errors: err.message }));\n        });\n    }\n  };\n\n  const isFormValid = ({ email, password }) =>\n    email && password\n      ? true\n      : setForm(prev => ({ ...prev, errors: \"Fill all fields\" }));\n\n  const errorMessage = <Message color=\"red\">{form.errors}</Message>;\n\n  return (\n    <Grid className=\"u-heigth100vh\" textAlign=\"center\" verticalAlign=\"middle\">\n      <Grid.Column style={{ maxWidth: 450 }}>\n        <Header as=\"h2\" color=\"red\" textAlign=\"center\">\n          <Icon name=\"code\" color=\"black\" />\n          Login to Plack\n        </Header>\n        <Form size=\"large\">\n          <Segment stacked>\n            <Form.Input\n              fluid\n              name=\"email\"\n              icon=\"mail\"\n              iconPosition=\"left\"\n              placeholder=\"Email-adress\"\n              onChange={handleChange}\n              type=\"email\"\n            />\n            <Form.Input\n              fluid\n              name=\"password\"\n              icon=\"lock\"\n              iconPosition=\"left\"\n              placeholder=\"Password\"\n              onChange={handleChange}\n              type=\"password\"\n            />\n            <Button\n              disabled={form.loading}\n              className={form.loading ? \"loading\" : null}\n              onClick={handleSubmit}\n              color=\"red\"\n              fluid\n              size=\"large\"\n            >\n              Login\n            </Button>\n          </Segment>\n        </Form>\n        {form.errors.length > 0 ? errorMessage : null}\n        <Message>\n          Not a user? <Link to=\"/register\">Register</Link>\n        </Message>\n      </Grid.Column>\n    </Grid>\n  );\n};\n\nexport default Login;\n","import React from \"react\";\nimport { Sidebar, Menu, Divider, Button } from \"semantic-ui-react\";\n\nconst ColorPanel = () => {\n  return (\n    <Sidebar\n      as={Menu}\n      icon=\"labeled\"\n      inverted\n      //   animation=\"overlay\"\n      vertical\n      visible\n      width=\"very thin\"\n    >\n      <Divider />\n      <Button icon=\"add\" size=\"small\" color=\"blue\" />\n    </Sidebar>\n  );\n};\n\nexport default ColorPanel;\n","import firebase from \"../firebase\";\n\nexport const handleOnlineStatus = (userId, action = \"remove\") => {\n  const ref = firebase.database().ref(\"presence/\" + userId);\n  if (action === \"add\") {\n    ref.set(true);\n  } else {\n    ref.remove();\n  }\n};\n","import React from \"react\";\nimport { useDispatch } from \"react-redux\";\nimport { resetApp } from \"../../Store/Actions/resetApp\";\nimport { handleOnlineStatus } from \"../../Helpers/handleOnlineStatus\";\nimport {\n  Grid,\n  GridColumn,\n  GridRow,\n  Header,\n  HeaderContent,\n  Icon,\n  Dropdown,\n  Image\n} from \"semantic-ui-react\";\nimport firebase from \"../../firebase\";\n\nconst UserPanel = ({ userData }) => {\n  const dispatch = useDispatch();\n\n  const handleSignout = () => {\n    firebase.auth().signOut();\n    handleOnlineStatus(userData.uid);\n    dispatch(resetApp());\n  };\n\n  const dropdownOptions = [\n    {\n      key: \"user\",\n      text: (\n        <span>\n          Signed in as <strong>{userData.displayName}</strong>\n        </span>\n      ),\n      disabled: true\n    },\n    {\n      key: \"avatar\",\n      text: <span>Change Avatar</span>\n    },\n    {\n      key: \"signout\",\n      text: <span onClick={handleSignout}>Sign Out</span>\n    }\n  ];\n\n  return (\n    <Grid>\n      <GridColumn>\n        <GridRow style={{ padding: \"1.2em\", margin: 0 }}>\n          <Header inverted floated=\"left\" as=\"h2\">\n            <Icon name=\"code\" />\n            <HeaderContent>Plack</HeaderContent>\n          </Header>\n          <Header style={{ padding: \"0.25em\" }} as=\"h4\" inverted>\n            <Dropdown\n              trigger={\n                <span>\n                  <Image src={userData.photoURL} spaced=\"right\" avatar />\n                  {userData.displayName}\n                </span>\n              }\n              options={dropdownOptions}\n            />\n          </Header>\n        </GridRow>\n      </GridColumn>\n    </Grid>\n  );\n};\n\nexport default UserPanel;\n","export const resetApp = () => ({\n  type: \"RESET_APP\"\n});\n","export const setChannel = (channel, isPrivate = false) => ({\n  type: \"SET_CHANNEL\",\n  channel,\n  isPrivate\n});\n","import React from \"react\";\nimport { Menu, Icon, Modal, Form, Input, Button } from \"semantic-ui-react\";\nimport { connect } from \"react-redux\";\nimport { setChannel } from \"../../Store/Actions/setChannel\";\nimport firebase from \"../../firebase\";\n\nclass Channels extends React.Component {\n  state = {\n    modal: false,\n    channelName: \"\",\n    channelDetails: \"\",\n    channels: [],\n    channelsRef: firebase.database().ref(\"channels\"),\n    firstLoad: true,\n    activeChannel: null\n  };\n\n  componentDidMount() {\n    this.addListeners();\n  }\n\n  componentWillUnmount() {\n    console.log(\"Unmount\");\n    this.state.channelsRef.off();\n  }\n\n  addListeners = () => {\n    let loadedChannels = [];\n    this.state.channelsRef.on(\"child_added\", snap => {\n      loadedChannels.push(snap.val());\n      this.setState({ channels: loadedChannels }, () => this.setFirstChannel());\n    });\n  };\n\n  setFirstChannel = () => {\n    if (this.state.firstLoad) {\n      this.props.setChannel(this.state.channels[0]);\n      this.setState({\n        firstLoad: false,\n        activeChannel: this.state.channels[0].id\n      });\n    }\n  };\n\n  closeModal = () => this.setState({ modal: false });\n\n  openModal = () => this.setState({ modal: true });\n\n  handleChange = e => {\n    this.setState({ [e.target.name]: e.target.value });\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n    if (this.isFormValid(this.state)) {\n      this.addChannel();\n    }\n  };\n\n  addChannel = () => {\n    const key = this.state.channelsRef.push().key;\n    const { userData } = this.props;\n    const { channelName, channelDetails } = this.state;\n\n    const newChannel = {\n      id: key,\n      name: channelName,\n      details: channelDetails,\n      createdBy: {\n        name: userData.displayName,\n        avatar: userData.photoURL\n      }\n    };\n    this.state.channelsRef\n      .child(key)\n      .update(newChannel)\n      .then(() => {\n        this.setState({ channelName: \"\", channelDetails: \"\" });\n        this.closeModal();\n      })\n      .catch(err => {\n        console.log(err);\n      });\n  };\n\n  isFormValid = ({ channelName, channelDetails }) =>\n    channelName && channelDetails;\n\n  changeChannel = channel => {\n    this.props.setChannel(channel);\n    this.setState({ activeChannel: channel.id });\n  };\n\n  displayChannels = channels => {\n    return channels.map(channel => (\n      <Menu.Item\n        key={channel.id}\n        onClick={() => this.changeChannel(channel)}\n        name={channel.name}\n        active={this.state.activeChannel === channel.id}\n      >\n        #{channel.name}\n      </Menu.Item>\n    ));\n  };\n  render() {\n    return (\n      <React.Fragment>\n        <Menu.Menu style={{ paddingBottom: \"2em\" }}>\n          <Menu.Item>\n            <span>\n              <Icon name=\"exchange\" /> CHANNELS\n            </span>\n            ({this.state.channels.length}){\" \"}\n            <Icon name=\"add\" onClick={this.openModal} />\n          </Menu.Item>\n          {this.displayChannels(this.state.channels)}\n        </Menu.Menu>\n\n        <Modal basic open={this.state.modal} onClose={this.closeModal}>\n          <Modal.Header>Add a Channel</Modal.Header>\n          <Modal.Content>\n            <Form.Field onSubmit={this.handleSubmit}>\n              <Form.Field>\n                <Input\n                  fluid\n                  label=\"Name of channel\"\n                  name=\"channelName\"\n                  onChange={this.handleChange}\n                />\n              </Form.Field>\n              <Form.Field>\n                <Input\n                  fluid\n                  label=\"About the Channel\"\n                  name=\"channelDetails\"\n                  onChange={this.handleChange}\n                />\n              </Form.Field>\n            </Form.Field>\n          </Modal.Content>\n          <Modal.Actions>\n            <Button color=\"green\" inverted onClick={this.handleSubmit}>\n              <Icon name=\"checkmark\" /> Add\n            </Button>\n            <Button color=\"red\" inverted onClick={this.closeModal}>\n              <Icon name=\"remove\" /> Cancel\n            </Button>\n          </Modal.Actions>\n        </Modal>\n      </React.Fragment>\n    );\n  }\n}\n\nexport default connect(null, { setChannel })(Channels);\n","import React from \"react\";\nimport firebase from \"../../firebase\";\nimport { connect } from \"react-redux\";\nimport { setChannel } from \"../../Store/Actions/setChannel\";\nimport { Menu, Icon, Image } from \"semantic-ui-react\";\n\nclass DirectMessages extends React.Component {\n  state = {\n    userRef: firebase.database().ref(\"users\"),\n    channelsRef: firebase.database().ref(\"privateMessages\"),\n    users: [],\n    presenceRef: firebase.database().ref(\"presence\"),\n    activeChannel: null\n  };\n\n  componentDidMount() {\n    if (this.props.userData) {\n      this.addEventListeners();\n    }\n  }\n\n  componentWillUnmount() {\n    this.removeListeners();\n  }\n\n  removeListeners = () => {\n    this.state.userRef.off();\n    this.state.presenceRef.off();\n  };\n\n  addEventListeners = () => {\n    this.setUsers(this.props.userData.uid);\n  };\n\n  setUsers = userId => {\n    let loadedUsers = [];\n    this.state.userRef.on(\"child_added\", snap => {\n      // this.createChannel(this.setChannelId(userId, snap.key));\n      if (userId !== snap.key) {\n        let user = snap.val();\n        user[\"uid\"] = snap.key;\n        user[\"status\"] = \"offline\";\n        loadedUsers.push(user);\n        this.setState({ users: loadedUsers });\n      }\n    });\n\n    this.state.presenceRef.on(\"child_added\", snap => {\n      if (userId !== snap.key) {\n        this.addStatusToUser(snap.key);\n      }\n    });\n\n    this.state.presenceRef.on(\"child_removed\", snap => {\n      if (userId !== snap.key) {\n        this.addStatusToUser(snap.key, false);\n      }\n    });\n  };\n\n  addStatusToUser = (userId, connected = true) => {\n    const updateUsers = this.state.users.reduce((acc, user) => {\n      if (user.uid === userId) {\n        user[\"status\"] = `${connected ? \"online\" : \"offline\"}`;\n      }\n      return acc.concat(user);\n    }, []);\n    this.setState({ users: updateUsers });\n  };\n\n  setChannel = user => {\n    this.setState({ activeChannel: user.uid });\n    const channelId = this.setChannelId(this.props.userData.uid, user.uid);\n    const channel = {\n      id: channelId,\n      name: user.name\n    };\n    this.createChannel(channelId, channel);\n    this.props.setChannel(channel, true);\n  };\n\n  createChannel = (channelId, channel) => {\n    this.state.channelsRef\n      .child(channelId)\n      .update(channel)\n      .catch(err => console.log(err));\n  };\n\n  setChannelId = (userId, friendId) => {\n    return userId > friendId\n      ? `${userId}/${friendId}`\n      : `${friendId}/${userId}`;\n  };\n\n  displayUsers = users => {\n    return users.map(user => (\n      <Menu.Item\n        key={user.uid}\n        onClick={() => this.setChannel(user)}\n        active={this.state.activeChannel === user.uid}\n      >\n        <span>\n          <Image src={user.avatar} avatar />\n          {user.name}\n        </span>\n        <Icon name=\"rss\" color={user.status === \"offline\" ? \"red\" : \"green\"} />\n      </Menu.Item>\n    ));\n  };\n\n  render() {\n    return (\n      <Menu.Menu>\n        <Menu.Item>\n          <span>\n            <Icon name=\"lock\" /> PRIVATE MESSAGES\n          </span>\n        </Menu.Item>\n        {this.displayUsers(this.state.users)}\n      </Menu.Menu>\n    );\n  }\n}\n\nexport default connect(null, { setChannel })(DirectMessages);\n","import React from \"react\";\nimport { Menu } from \"semantic-ui-react\";\nimport UserPanel from \"./UserPanel\";\nimport Channels from \"./Channels\";\nimport DirectMessages from \"./DirectMessages\";\n\nconst SidePanel = ({ userData }) => {\n  return (\n    <Menu\n      style={{ backgroundColor: \"#40123e\" }}\n      fixed=\"left\"\n      vertical\n      inverted\n      size=\"large\"\n    >\n      <UserPanel userData={userData} />\n      <Channels userData={userData} />\n      <DirectMessages userData={userData} />\n    </Menu>\n  );\n};\n\nexport default SidePanel;\n","import React from \"react\";\nimport { Header, Segment, Input, Icon } from \"semantic-ui-react\";\n\nconst MessagesHeader = ({ channelName, userAmount, handleChange }) => {\n  return (\n    <Segment clearing>\n      <Header fluid=\"true\" as=\"h2\" floated=\"left\">\n        <span>\n          {channelName}\n          <Icon name=\"star outline\" color=\"black\" />\n        </span>\n        <Header.Subheader>{userAmount}</Header.Subheader>\n      </Header>\n      <Header floated=\"right\">\n        <Input\n          size=\"mini\"\n          type=\"text\"\n          icon=\"search\"\n          name=\"searchTerm\"\n          placeholder=\"Search Messages\"\n          onChange={handleChange}\n        />\n      </Header>\n    </Segment>\n  );\n};\n\nexport default MessagesHeader;\n","import React, { useState } from \"react\";\nimport mime from \"mime-types\";\nimport { Modal, Input, Icon, Button } from \"semantic-ui-react\";\n\nconst FileModal = ({ modal, closeModal, uploadFile }) => {\n  const [data, setData] = useState({\n    file: null,\n    authorized: [\"image/jpeg\", \"image/png\"]\n  });\n\n  const addFile = e => {\n    const file = e.target.files[0];\n    if (file) {\n      setData({ ...data, file: file });\n    }\n  };\n\n  const sendFile = () => {\n    if (data.file !== null) {\n      if (isAuthorized(data.file.name)) {\n        const metadata = { contentType: mime.lookup(data.file.name) };\n        uploadFile(data.file, metadata);\n        resetFileState();\n        closeModal();\n      }\n    }\n  };\n\n  const resetFileState = () => {\n    setData({ ...data, file: null });\n  };\n\n  const closeModalHere = () => {\n    closeModal();\n    resetFileState();\n  };\n\n  const isAuthorized = fileName =>\n    data.authorized.includes(mime.lookup(fileName));\n\n  return (\n    <Modal basic open={modal} onClose={closeModal}>\n      <Modal.Header>Select an image file</Modal.Header>\n      <Modal.Content>\n        <Input\n          onChange={addFile}\n          fluid\n          label=\"File types: JPEG, PNG\"\n          name=\"file\"\n          type=\"file\"\n        />\n      </Modal.Content>\n      <Modal.Actions>\n        <Button color=\"green\" onClick={sendFile} inverted>\n          <Icon name=\"checkmark\" /> Send\n        </Button>\n        <Button color=\"red\" inverted onClick={closeModalHere}>\n          <Icon name=\"remove\" /> Cancel\n        </Button>\n      </Modal.Actions>\n    </Modal>\n  );\n};\n\nexport default FileModal;\n","import React from \"react\";\nimport { Progress } from \"semantic-ui-react\";\n\nconst ProgressBar = ({ uploadState, percents }) =>\n  uploadState === 'uploading' && (\n    <Progress\n      className=\"progress_bar\"\n      percent={percents}\n      progress\n      indicating\n      size=\"medium\"\n      inverted\n    />\n  );\n\nexport default ProgressBar;\n","import React from \"react\";\nimport { v4 as uuidv4 } from \"uuid\";\nimport { Segment, Button, Input } from \"semantic-ui-react\";\nimport FileModal from \"./FileModal\";\nimport firebase from \"../../firebase\";\nimport ProgressBar from \"./ProgressBar\";\n\nclass MessageForm extends React.Component {\n  constructor() {\n    super();\n\n    this.state = {\n      message: \"\",\n      loading: false,\n      error: \"\",\n      modal: false,\n      uploadTask: null,\n      uploadState: \"\",\n      percentUploaded: 0,\n      storageRef: firebase.storage().ref()\n    };\n  }\n\n  handleChange = e => {\n    this.setState({\n      [e.target.name]: e.target.value\n    });\n  };\n\n  createMessage = (fileUrl = null) => {\n    const message = {\n      timestamp: firebase.database.ServerValue.TIMESTAMP,\n      user: {\n        id: this.props.user.uid,\n        name: this.props.user.displayName,\n        avatar: this.props.user.photoURL\n      }\n    };\n    if (fileUrl !== null) {\n      message[\"image\"] = fileUrl;\n    } else {\n      message[\"content\"] = this.state.message;\n    }\n    return message;\n  };\n\n  uploadFile = (file, metadata) => {\n    const filePath = `chat/public/${uuidv4()}.jpg`;\n    const pathToUpload = this.props.channel.id;\n    const ref = this.props.messageRef;\n\n    this.setState(\n      {\n        uploadState: \"uploading\",\n        uploadTask: this.state.storageRef.child(filePath).put(file, metadata)\n      },\n      () => {\n        this.state.uploadTask.on(\n          \"state_changed\",\n          snap => {\n            const percentUploaded = Math.round(\n              (snap.bytesTransferred / snap.totalBytes) * 100\n            );\n\n            this.setState({ percentUploaded });\n          },\n          err => {\n            console.log(err);\n            this.setState({ uploadState: \"error\", uploadTask: null });\n          },\n          () => {\n            this.state.uploadTask.snapshot.ref\n              .getDownloadURL()\n              .then(downloadUrl => {\n                this.sendFileMessage(downloadUrl, ref, pathToUpload);\n              })\n              .catch(err => {\n                console.log(err);\n                this.setState({ uploadState: \"error\", uploadTask: null });\n              });\n          }\n        );\n      }\n    );\n  };\n\n  sendFileMessage = (fileUrl, ref, pathToUpload) => {\n    ref\n      .child(pathToUpload)\n      .push()\n      .set(this.createMessage(fileUrl))\n      .then(() => {\n        this.setState({ uploadState: \"done\" });\n      })\n      .catch(err => {\n        console.log(err);\n        this.setState({ error: err.message });\n      });\n  };\n\n  sendMessage = () => {\n    const { messageRef, channel } = this.props;\n    const setChannel = this.props.isPrivate\n      ? `${channel.id}/messages`\n      : channel.id;\n\n    if (this.state.message.length > 0) {\n      this.setState({ loading: true, error: \"\" });\n      messageRef\n        .child(setChannel)\n        .push()\n        .set(this.createMessage())\n        .then(() => {\n          this.setState({ loading: false, message: \"\" });\n        })\n        .catch(err => {\n          console.log(err);\n          this.setState({\n            loading: false,\n            message: \"\",\n            error: err.message\n          });\n        });\n    } else this.setState({ error: \"No data filled\" });\n  };\n\n  openModal = () => this.setState({ modal: true });\n\n  closeModal = () => this.setState({ modal: false });\n  render() {\n    const {\n      message,\n      error,\n      loading,\n      modal,\n      uploadState,\n      percentUploaded\n    } = this.state;\n    return (\n      <Segment className=\"messageForm\">\n        <Input\n          value={message}\n          fluid\n          name=\"message\"\n          label={<Button icon=\"add\" />}\n          labelPosition=\"left\"\n          className={error.length > 0 ? \"error\" : null}\n          placeholder=\"Write your message\"\n          onChange={this.handleChange}\n          onKeyDown={e => (e.keyCode === 13 ? this.sendMessage() : null)}\n        />\n        <Button.Group icon widths=\"2\" style={{ marginTop: \"10px\" }}>\n          <Button\n            color=\"green\"\n            content=\"Add Reply\"\n            labelPosition=\"left\"\n            icon=\"edit\"\n            onClick={this.sendMessage}\n            disabled={loading}\n            className={loading ? \"loading\" : null}\n          />\n          <Button\n            color=\"red\"\n            content=\"Upload Media\"\n            disabled={uploadState === \"uploading\"}\n            labelPosition=\"right\"\n            icon=\"cloud upload\"\n            onClick={this.openModal}\n          />\n        </Button.Group>\n        <FileModal\n          modal={modal}\n          closeModal={this.closeModal}\n          uploadFile={this.uploadFile}\n        />\n        <ProgressBar uploadState={uploadState} percents={percentUploaded} />\n      </Segment>\n    );\n  }\n}\n\nexport default MessageForm;\n","import React from \"react\";\nimport moment from \"moment\";\nimport { Comment, Image } from \"semantic-ui-react\";\n\nconst isOnMessage = (message, user) => {\n  return message.user.id === user.uid ? \"message_self\" : null;\n};\n\nconst isImage = message => {\n  return message.hasOwnProperty(\"image\") && !message.hasOwnProperty(\"content\");\n};\n\nconst timeFromNow = timestamp => {\n  return moment(timestamp).fromNow();\n};\n\nconst SingleMessage = ({ message, user }) => {\n  return (\n    <Comment>\n      <Comment.Avatar src={message.user.avatar} />\n      <Comment.Content className={isOnMessage(message, user)}>\n        <Comment.Author as=\"a\">{message.user.name}</Comment.Author>\n        <Comment.Metadata>{timeFromNow(message.timestamp)}</Comment.Metadata>\n\n        {isImage(message) ? (\n          <Image src={message.image} className=\"message_image\" />\n        ) : (\n          <Comment.Text>{message.content}</Comment.Text>\n        )}\n      </Comment.Content>\n    </Comment>\n  );\n};\n\nexport default SingleMessage;\n","import React, { useState, useEffect, useRef } from \"react\";\nimport { Segment, Comment } from \"semantic-ui-react\";\nimport firebase from \"../../firebase\";\nimport MessagesHeader from \"./MessagesHeader\";\nimport MessageForm from \"./MessageForm\";\nimport SingleMessage from \"./SingleMessage\";\n\nconst Messages = ({ channel, user, isPrivate }) => {\n  const [data, setData] = useState({\n    messages: [],\n    messageLoading: null,\n    messageRef: firebase.database().ref(\"messages\"),\n    privateMessageRef: firebase.database().ref(\"privateMessages\"),\n    listeners: [],\n    searchTerm: \"\"\n  });\n\n  const messagesEndRef = useRef(null);\n\n  const scrollToBottom = () => {\n    messagesEndRef.current.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  useEffect(() => {\n    if (channel && user) {\n      removeListeners(data.listeners);\n      setData(data => ({ ...data, messageLoading: true }));\n      addListeners(channel.id);\n    }\n    return () => {\n        data.messageRef.off();\n      };\n      // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [channel, user]);\n\n  useEffect(() => {\n    scrollToBottom();\n  });\n\n  const removeListeners = listeners => {\n    listeners.forEach(listener => {\n      listener.ref.child(listener.id).off(listener.event);\n    });\n  };\n\n  const addToListeners = (id, ref, event) => {\n    const index = data.listeners.findIndex(listener => {\n      return (\n        listener.id === id && listener.ref === ref && listener.event === event\n      );\n    });\n\n    if (index === -1) {\n      const newListener = { id, ref, event };\n      setData(prev => ({\n        ...prev,\n        listeners: data.listeners.concat(newListener)\n      }));\n    }\n  };\n\n  const addListeners = channelId => {\n    addMessageListener(channelId);\n  };\n\n  const addMessageListener = channelId => {\n    const setChannel = isPrivate ? `${channelId}/messages` : channelId;\n    const setMessageRef = isPrivate ? data.privateMessageRef : data.messageRef;\n    setData(prev => ({\n      ...prev,\n      messages: []\n    }));\n    let loadedMessages = [];\n    setMessageRef.child(setChannel).on(\"child_added\", snap => {\n      loadedMessages.push(snap.val());\n      setData(prev => ({\n        ...prev,\n        messages: loadedMessages,\n        messageLoading: false\n      }));\n    });\n\n    addToListeners(setChannel, setMessageRef, \"child_added\");\n  };\n\n  const displayMessages = messages => {\n    if (messages.length > 0) {\n      return messages\n        .filter(filter => {\n          if (data.searchTerm.length === 0) {\n            return filter;\n          } else if (\n            filter.content !== undefined &&\n            filter.content.includes(data.searchTerm)\n          ) {\n            return filter;\n          }\n          return null;\n        })\n        .map(message => (\n          <SingleMessage\n            key={message.timestamp}\n            message={message}\n            user={user}\n          />\n        ));\n    }\n  };\n\n  const handleChange = e => {\n    setData({ ...data, [e.target.name]: e.target.value });\n  };\n\n  const displayChannelName = channel => (channel ? channel.name : \"\");\n\n  const usersAmount = messages => {\n    const users = messages.reduce((acc, message) => {\n      if (!acc.includes(message.user.name)) {\n        acc.push(message.user.name);\n      }\n      return acc;\n    }, []);\n    return users.length === 1\n      ? `${users.length} user`\n      : `${users.length} users`;\n  };\n\n  return (\n    <React.Fragment>\n      <MessagesHeader\n        handleChange={handleChange}\n        channelName={displayChannelName(channel)}\n        userAmount={usersAmount(data.messages)}\n      />\n      <Segment className=\"messages\" loading={data.messageLoading}>\n        <Comment.Group>\n          {displayMessages(data.messages)}\n          <div ref={messagesEndRef} />\n        </Comment.Group>\n      </Segment>\n      <MessageForm\n        messageRef={isPrivate ? data.privateMessageRef : data.messageRef}\n        isPrivate={isPrivate}\n        channel={channel}\n        user={user}\n      />\n    </React.Fragment>\n  );\n};\n\nexport default Messages;\n\n\n\n\n\n\n// import React from \"react\";\n// import { Segment, Comment } from \"semantic-ui-react\";\n// import firebase from \"../../firebase\";\n// import MessagesHeader from \"./MessagesHeader\";\n// import MessageForm from \"./MessageForm\";\n// import SingleMessage from \"./SingleMessage\";\n\n// class Messages extends React.Component {\n//   state = {\n//     messages: [],\n//     messageLoading: null,\n//     messageRef: firebase.database().ref(\"messages\"),\n//     privateMessageRef: firebase.database().ref(\"privateMessages\"),\n//     listeners: [],\n//     searchTerm: \"\"\n//   }\n\n//   // messagesEndRef = useRef(null);\n\n//   scrollToBottom = () => {\n//     this.messagesEndRef.current.scrollIntoView({ behavior: \"smooth\" });\n//   };\n\n//   componentDidMount = () =>{\n//     if (this.props.channel && this.props.user) {\n//       this.removeListeners(this.state.listeners);\n//       this.setState({ messageLoading: true });\n//       this.addListeners(this.props.channel.id);\n//     }\n//   }\n\n//   componentWillUnmount = () =>{\n//     this.messageRef.off();\n//   }\n\n//   removeListeners = listeners => {\n//     listeners.forEach(listener => {\n//       listener.ref.child(listener.id).off(listener.event);\n//     });\n//   };\n\n//   addToListeners = (id, ref, event) => {\n//     const index = this.state.listeners.findIndex(listener => {\n//       return (\n//         listener.id === id && listener.ref === ref && listener.event === event\n//       );\n//     });\n\n//     if (index === -1) {\n//       const newListener = { id, ref, event };\n//       this.setState({\n//         listeners: this.state.listeners.concat(newListener)\n//       });\n//     }\n//   };\n\n//   addListeners = channelId => {\n//     this.addMessageListener(channelId);\n//   };\n\n//   addMessageListener = channelId => {\n//     const setChannel = this.props.isPrivate ? `${channelId}/messages` : channelId;\n//     const setMessageRef = this.props.isPrivate ? this.props.privateMessageRef : this.props.messageRef;\n//     this.setState({\n     \n//       messages: []\n//     });\n//     let loadedMessages = [];\n//     setMessageRef.child(setChannel).on(\"child_added\", snap => {\n//       loadedMessages.push(snap.val());\n//       this.setState({\n//         messages: loadedMessages,\n//         messageLoading: false\n//       });\n//     });\n\n//     this.addToListeners(setChannel, setMessageRef, \"child_added\");\n//   };\n\n//   displayMessages = messages => {\n//     if (messages.length > 0) {\n//       return messages\n//         .filter(filter => {\n//           if (this.state.searchTerm.length === 0) {\n//             return filter;\n//           } else if (\n//             filter.content !== undefined &&\n//             filter.content.includes(this.state.searchTerm)\n//           ) {\n//             return filter;\n//           }\n//           return null;\n//         })\n//         .map(message => (\n//           <SingleMessage\n//             key={message.timestamp}\n//             message={message}\n//             user={this.props.user}\n//           />\n//         ));\n//     }\n//   };\n\n//   handleChange = e => {\n//     this.setState({[e.target.name]: e.target.value });\n//   };\n\n//   displayChannelName = channel => (channel ? channel.name : \"\");\n\n//   usersAmount = messages => {\n//     const users = messages.reduce((acc, message) => {\n//       if (!acc.includes(message.user.name)) {\n//         acc.push(message.user.name);\n//       }\n//       return acc;\n//     }, []);\n//     return users.length === 1\n//       ? `${users.length} user`\n//       : `${users.length} users`;\n//   };\n// render(){\n//   return (\n//     <React.Fragment>\n//       <MessagesHeader\n//         handleChange={this.handleChange}\n//         channelName={this.displayChannelName(this.props.channel)}\n//         userAmount={this.usersAmount(this.state.messages)}\n//       />\n//       <Segment className=\"messages\" loading={this.state.messageLoading}>\n//         <Comment.Group>\n//           {this.displayMessages(this.state.messages)}\n//           <div ref={this.messagesEndRef} />\n//         </Comment.Group>\n//       </Segment>\n//       <MessageForm\n//         messageRef={this.props.isPrivate ? this.state.privateMessageRef : this.props.messageRef}\n//         isPrivate={this.props.isPrivate}\n//         channel={this.props.channel}\n//         user={this.props.user}\n//       />\n//     </React.Fragment>\n//   )\n// }\n  \n// };\n\n// export default Messages;\n\n","import React from \"react\";\n\nconst MetaPanel = () => {\n  return <div>MetaPanel</div>;\n};\n\nexport default MetaPanel;\n","import React from \"react\";\nimport { Grid, GridColumn } from \"semantic-ui-react\";\nimport ColorPanel from \"../../Components/ColorPanel/ColorPanel\";\nimport SidePanel from \"../../Components/SidePanel/SidePanel\";\nimport Messages from \"../../Components/Messages/Messages\";\nimport MetaPanel from \"../../Components/MetaPanel/MetaPanel\";\nimport { useSelector } from \"react-redux\";\n\nimport \"../../App.css\";\n\nconst MainPage = () => {\n  const data = useSelector(state =>\n    state.user.user !== null\n      ? {\n          user: state.user.user,\n          channel: state.channel.channel,\n          isPrivate: state.channel.isPrivate\n        }\n      : { user: \"\" }\n  );\n  return (\n    <Grid columns=\"equal\">\n      {/* <GridColumn> */}\n      <ColorPanel />\n      {/* </GridColumn> */}\n      {/* <GridColumn> */}\n      <SidePanel userData={data.user} />\n      {/* </GridColumn> */}\n      <GridColumn style={{ marginLeft: \"320px\" }}>\n        <Messages\n          channel={data.channel}\n          user={data.user}\n          isPrivate={data.isPrivate}\n        />\n      </GridColumn>\n      <GridColumn width={4}>\n        <MetaPanel />\n      </GridColumn>\n    </Grid>\n  );\n};\n\nexport default MainPage;\n","import React from \"react\";\nimport { Loader, Dimmer } from \"semantic-ui-react\";\n\nconst Spinner = () => {\n  return (\n    <Dimmer active>\n      <Loader size=\"huge\" content=\"Loading\" />\n    </Dimmer>\n  );\n};\n\nexport default Spinner;\n","import React from \"react\";\nimport { Switch, Route, withRouter } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport firebase from \"./firebase\";\nimport Register from \"./Pages/Register/Register\";\nimport Login from \"./Pages/Login/Login\";\nimport MainPage from \"./Pages/MainPage/MainPage\";\nimport Spinner from \"./Components/Spinner/Spiner\";\nimport { setUser } from \"./Store/Actions/setUser\";\nimport { handleOnlineStatus } from \"./Helpers/handleOnlineStatus\";\n\nclass App extends React.Component {\n  componentDidMount() {\n    //firebase is mounted, and this function is always active\n    firebase.auth().onAuthStateChanged(user => {\n      if (user !== null) {\n        this.props.setUser(user);\n        handleOnlineStatus(user.uid, \"add\");\n        window.addEventListener(\"beforeunload\", () => {\n          handleOnlineStatus(user.uid);\n        });\n        this.props.history.push(\"/plackApp\");\n      } else {\n        this.props.setUser(null);\n        this.props.history.push(\"/login\");\n      }\n    });\n  }\n  render() {\n    return this.props.isLoading ? (\n      <Spinner />\n    ) : (\n      <div className=\"App\">\n        <Switch>\n          <Route exact path=\"/plackApp\" component={MainPage} />\n          <Route path=\"/login\" component={Login} />\n          <Route path=\"/register\" component={Register} />\n        </Switch>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => ({\n  isLoading: state.user.isLoading\n});\n\nexport default withRouter(connect(mapStateToProps, { setUser })(App));\n","export const setUser = user => ({\n  type: \"SET_USER\",\n  user\n});\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport { createStore, applyMiddleware } from \"redux\";\nimport { Provider } from \"react-redux\";\nimport { allReducer } from \"./Store/Reducers/index\";\nimport Thunk from \"redux-thunk\";\n// import logger from \"redux-logger\";\nimport { HashRouter as Router } from \"react-router-dom\";\nimport App from \"./App\";\nimport \"semantic-ui-css/semantic.min.css\";\nimport './index.css'\n\nconst store = createStore(allReducer, applyMiddleware(Thunk));\n\nReactDOM.render(\n  <Router>\n    <Provider store={store}>\n      <App />\n    </Provider>\n  </Router>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}